# /etc/systemd/system/youless.service
[Unit]
Description=Youless Reader (runs youless_reader.py inside Python venv)
After=network-online.target
Wants=network-online.target

[Service]
# --- Adjust these paths and user/group ---
User=daemon
Group=daemon
WorkingDirectory=/opt/youless
# see https://chatgpt.com/s/t_694b156f37dc8191a5740da448e44641 for dealing with env vars
# -----------------------------------------

# Environment (optional but useful)
Environment=PYTHONUNBUFFERED=1
Environment=PYTHONDONTWRITEBYTECODE=1
# install the file below locally on the node, it has the postgress credentials
EnvironmentFile=-/etc/youless/youless.env

# the actual executable. It starts the python env, and starts the script
# DEPENDS ON WorkingDirectory
ExecStart=/opt/youless/.venv/bin/python /opt/youless/src/youless_reader.py

# Restart policy
Restart=always
RestartSec=3
# Stop gracefully
KillSignal=SIGINT
TimeoutStopSec=30

# Journald logs
StandardOutput=journal
StandardError=journal

# Hardening (safe defaults; relax if your script needs more)
NoNewPrivileges=true
PrivateTmp=true
ProtectSystem=full
ProtectHome=true
ReadWritePaths=/opt/youless

[Install]
WantedBy=multi-user.target
